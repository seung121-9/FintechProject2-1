<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.accommodation">
	<resultMap type="accDTO" id="accResult">
    <result property="accommodation_id" column="accommodation_id"/>
    <result property="admin_id" column="admin_id"/>
    <result property="accommodation_name" column="accommodation_name"/>
    <result property="accommodation_photo" column="accommodation_photo"/>
    <result property="cleaner_admin_id" column="cleaner_admin_id"/>
    <result property="capacity" column="capacity"/>
    <result property="room_count" column="room_count"/>
    <result property="bathroom_count" column="bathroom_count"/>
    <result property="bed_count" column="bed_count"/>
	</resultMap>


	<select id="accList" resultMap="accResult">
		select * from accommodation order by accommodation_id desc
	</select>

	<insert id="addAccommodation" parameterType="accDTO">
		INSERT INTO accommodation (accommodation_id, admin_id, accommodation_name,
		accommodation_photo, cleaner_admin_id, capacity, room_count,
		bathroom_count, bed_count, wifi_avail, price)
		VALUES ('ACC' || LPAD(accommodation_seq.NEXTVAL, 5, '0'), #{admin_id},
		#{accommodation_name}, #{accommodation_photo}, #{cleaner_admin_id},
		#{capacity}, #{room_count}, #{bathroom_count}, #{bed_count}, #{wifi_avail}, #{price})
	</insert>

	<!-- 방금 삽입한 숙소 ID 가져오기 -->
	<select id="getLastInsertedAccommodationId" resultType="String">
		SELECT 'ACC' || LPAD(accommodation_seq.CURRVAL, 5, '0') FROM DUAL
	</select>


	<select id="findAccommodationById" parameterType="string"
		resultMap="accResult">
		SELECT * FROM accommodation	WHERE accommodation_id = #{accommodation_id}
	</select>
</mapper>